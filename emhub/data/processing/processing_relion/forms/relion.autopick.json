{
    "sections": [
        {
            "label": "I/O",
            "params": [
                {
                    "name": "fn_input_autopick",
                    "label": "Input micrographs for autopick:",
                    "pattern": "STAR Files (*.star)",
                    "help": "Input STAR file (preferably with CTF information) with all micrographs to pick from."
                },
                {
                    "name": "angpix",
                    "label": "Pixel size in micrographs (A)",
                    "default": -1,
                    "valueClass": "Float",
                    "paramClass": "FloatParam",
                    "help": "Pixel size in Angstroms. If a CTF-containing STAR file is input, then the value given here will be ignored, and the pixel size will be calculated from the values in the STAR file. A negative value can then be given here."
                },
                {},
                {
                    "name": "do_refs",
                    "label": "Use reference-based template-matching?",
                    "default": false,
                    "valueClass": "Boolean",
                    "paramClass": "BooleanParam",
                    "help": "If set to Yes, 2D or 3D references, as defined on the References tab will be used for autopicking."
                },
                {
                    "name": "do_log",
                    "label": "OR: use Laplacian-of-Gaussian?",
                    "default": false,
                    "valueClass": "Boolean",
                    "paramClass": "BooleanParam",
                    "help": "If set to Yes, a Laplacian-of-Gaussian blob detection will be used (you can then leave the 'References' field empty. The preferred way to autopick is by setting this to no and providing references that were generated by 2D classification from this data set in RELION. The Laplacian-of-Gaussian method may be useful to kickstart a new data set. Please note that some options in the autopick tab are ignored in this method. See help messages of each option for details."
                },
                {
                    "name": "do_topaz",
                    "label": "OR: use Topaz?",
                    "default": false,
                    "valueClass": "Boolean",
                    "paramClass": "BooleanParam",
                    "help": "If set to Yes, topaz will be used for autopicking. Run 2 separate jobs from the Topaz tab: one for training the model and for the actual picking."
                },
                {
                    "name": "continue_manual",
                    "label": "OR: continue manually?",
                    "default": false,
                    "valueClass": "Boolean",
                    "paramClass": "BooleanParam",
                    "help": "If set to Yes, an Autopick job can be continued as a manualpick job, so that incorrect picks can be corrected interactively."
                }
            ]
        },
        {
            "label": "Laplacian",
            "params": [
                {
                    "name": "log_diam_min",
                    "label": "Min. diameter for LoG filter (A)",
                    "default": 200,
                    "valueClass": "Integer",
                    "paramClass": "IntegerParam",
                    "help": "The smallest allowed diameter for the blob-detection algorithm. This should correspond to the smallest size of your particles in Angstroms."
                },
                {
                    "name": "log_diam_max",
                    "label": "Max. diameter for LoG filter (A)",
                    "default": 250,
                    "valueClass": "Integer",
                    "paramClass": "IntegerParam",
                    "help": "The largest allowed diameter for the blob-detection algorithm. This should correspond to the largest size of your particles in Angstroms."
                },
                {
                    "name": "log_invert",
                    "label": "Are the particles white?",
                    "default": false,
                    "valueClass": "Boolean",
                    "paramClass": "BooleanParam",
                    "help": "Set this option to No if the particles are black, and to Yes if the particles are white."
                },
                {},
                {
                    "name": "log_maxres",
                    "label": "Maximum resolution to consider (A)",
                    "default": 20,
                    "valueClass": "Integer",
                    "paramClass": "IntegerParam",
                    "help": "The Laplacian-of-Gaussian filter will be applied to downscaled micrographs with the corresponding size. Give a negative value to skip downscaling."
                },
                {
                    "name": "log_adjust_thr",
                    "label": "Adjust default threshold (stddev):",
                    "default": 0,
                    "valueClass": "Float",
                    "paramClass": "FloatParam",
                    "help": "Use this to pick more (negative number -> lower threshold) or less (positive number -> higher threshold) particles compared to the default setting. The threshold is moved this many standard deviations away from the average."
                },
                {
                    "name": "log_upper_thr",
                    "label": "Upper threshold (stddev):",
                    "default": 999,
                    "valueClass": "Float",
                    "paramClass": "FloatParam",
                    "help": "Use this to discard picks with LoG thresholds that are this many standard deviations above the average, e.g. to avoid high contrast contamination like ice and ethane droplets. Good values depend on the contrast of micrographs and need to be interactively explored; for low contrast micrographs, values of ~ 1.5 may be reasonable, but the same value will be too low for high-contrast micrographs."
                }
            ]
        },
        {
            "label": "Topaz",
            "params": [
                {
                    "name": "topaz_particle_diameter",
                    "label": "Particle diameter (A)",
                    "default": -1,
                    "valueClass": "Integer",
                    "paramClass": "IntegerParam",
                    "help": "Diameter of the particle (to be used to infer topaz downscale factor and particle radius)"
                },
                {},
                {
                    "name": "do_topaz_pick",
                    "label": "Perform topaz picking?",
                    "default": false,
                    "valueClass": "Boolean",
                    "paramClass": "BooleanParam",
                    "help": "Set this option to Yes if you want to use a topaz model for autopicking."
                },
                {
                    "name": "topaz_model",
                    "label": "Trained topaz model:",
                    "pattern": "SAV Files (*.sav)",
                    "default": ".",
                    "help": "Trained topaz model for topaz-based picking. Use on job for training and a next job for picking. Leave this empty to use the default (general) model."
                },
                {},
                {
                    "name": "do_topaz_train",
                    "label": "Perform topaz training?",
                    "default": false,
                    "valueClass": "Boolean",
                    "paramClass": "BooleanParam",
                    "help": "Set this option to Yes if you want to train a topaz model."
                },
                {
                    "name": "topaz_nr_particles",
                    "label": "Nr of particles per micrograph:",
                    "default": -1,
                    "valueClass": "Integer",
                    "paramClass": "IntegerParam",
                    "help": "Expected average number of particles per micrograph."
                },
                {
                    "name": "topaz_train_picks",
                    "label": "Input picked coordinates for training:",
                    "default": false,
                    "help": "Input STAR file (preferably with CTF information) with all micrographs to pick from."
                },
                {
                    "name": "do_topaz_train_parts",
                    "label": "OR train on a set of particles?",
                    "default": false,
                    "valueClass": "Boolean",
                    "paramClass": "BooleanParam",
                    "help": "If set to Yes, the input Coordinates above will be ignored. Instead, one uses a _data.star file from a previous 2D or 3D refinement or selection to use those particle positions for training."
                },
                {
                    "name": "topaz_train_parts",
                    "label": "Particles STAR file for training:",
                    "default": false,
                    "help": "Filename of the STAR file with the particle coordinates to be used for training, e.g. from a previous 2D or 3D classification or selection."
                },
                {},
                {
                    "name": "fn_topaz_exe",
                    "label": "Topaz executable:",
                    "default": "relion_python_topaz",
                    "help": "Executable for running topaz. The default relion_python_topaz gets installed automatically through conda in a typical relion install. Only change this if this executable gives you problems."
                },
                {
                    "name": "topaz_other_args",
                    "label": "Additional topaz arguments:",
                    "help": "These additional arguments will be passed onto all topaz programs."
                }
            ]
        },
        {
            "label": "References",
            "params": []
        },
        {
            "label": "autopicking",
            "params": []
        },
        {
            "label": "Helix",
            "params": []
        }
    ]
}