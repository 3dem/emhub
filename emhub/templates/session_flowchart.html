
<style>
    .workflow-canvas {
        width: 100%;
        height: 700px;
        border: 1px solid lightgray;
        {#margin-bottom: 15px;#}
        background:
          linear-gradient(90deg, #f0f0f0 21px, transparent 1%) center,
          linear-gradient(#f0f0f0 21px, transparent 1%) center, #646464;
           background-size: 22px 22px;
      }

    .logs_editor {
        position: relative;
        width: 100%;
        height: 250px;
    }

</style>


<div class="container-fluid dashboard-content">
    <!-- Header -->
    {% set title = "Session Workflow" %}
    {% set navigation = [('Sessions', url_for_content('sessions_list')), (session.name, '')] %}
    {% include 'include_header.html' %}




    <div class="card h-100">
        <div class="card-body">
            <div class="row p-0">
                <div class="col-6 p-2">
                    <div id="session_flowchart" class="col-12 workflow-canvas"></div>
                    <div id="session_logs" class="col-12 mt-3"  style="background-color: green; height: 400px">a</div>
                </div>
                <div id="session_outputs" class="col-3" style="background-color: red">x</div>
                <div id="session_params" class="col-3" style="background-color: blue">y</div>
            </div>
        </div>
    </div>

</div>


<script>

        var selected_node = null;
        var workflow = {{ workflow|tojson }};


(function(window, document, $, undefined) {
    "use strict";
    $(function() {
        var container = document.getElementById("session_flowchart");
        var network = createNetwork(container, workflow);

        network.on("click", clickOnCanvas);

    });
})(window, document, window.jQuery);

    function clickOnCanvas(params){
        var  nodeId = params.nodes[0];
        selected_node = null;

        // find node with  that id
          for (var i = 0;  i < workflow.length; i++){
              var prot = workflow[i];
              if (prot.id == nodeId) {
                  selected_node = prot;
                  break;
              }
          }

          alert("Selected: " + selected_node.id);

    }


</script>