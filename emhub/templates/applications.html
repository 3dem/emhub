
<div class="container-fluid dashboard-content">
    <!-- Header -->
    {% set title = "Applications" %}
    {% set navigation = [('Admin', ''), ('Applications', '')] %}
    {% include 'include_header.html' %}

    <div class="row">
        <!-- ============================================================== -->
        <!-- Application Tabs  -->
        <!-- ============================================================== -->
        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12 mb-5">
            <div class="tab-regular">
                <ul class="nav nav-tabs " id="applicationTabsNav" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link" id="preparation-tab" data-toggle="tab" href="#preparation" role="tab" aria-controls="preparation" aria-selected="false">Preparation</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="submitted-tab" data-toggle="tab" href="#submitted" role="tab" aria-controls="submitted" aria-selected="false">Submitted</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" id="accepted-tab" data-toggle="tab" href="#accepted" role="tab" aria-controls="accepted" aria-selected="true">Accepted</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="others-tab" data-toggle="tab" href="#others" role="tab" aria-controls="others" aria-selected="false">Others</a>
                    </li>
                </ul>
                <div class="tab-content" id="applicationTabsContent">
                    <div class="tab-pane fade" id="preparation" role="tabpanel" aria-labelledby="preparation-tab">
                    </div>
                    <div class="tab-pane fade" id="submitted" role="tabpanel" aria-labelledby="submitted-tab">
                        <h3>Tab Content Heading</h3>
                        <p>Nullam et tellus ac ligula condimentum sodales. Aenean tincidunt viverra suscipit. Maecenas id molestie est, a commodo nisi. Quisque fringilla turpis nec elit eleifend vestibulum. Aliquam sed purus in odio ullamcorper congue consectetur in neque. Aenean sem ex, tempor et auctor sed, congue id neque. </p>
                    </div>
                    <div class="tab-pane fade show active" id="accepted" role="tabpanel" aria-labelledby="accepted-tab">
                        <table id="example" class="table table-striped table-bordered" style="width:100%">
                            <thead>
                            <tr>
                                <th>code</th>
                                <th>alias</th>
                                <th>title</th>
                                <th>creator</th>
                                <th>actions</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for a in applications %}
                            <tr>
                                <td>{{ a.code }}</td>
                                <td>{{ a.alias }}</td>
                                <td>{{ a.title }}</td>
                                <td>{{ a.creator.name }}</td>
                                <td style="width: 105px;">
                                    <button class="btn btn-sm btn-outline-light"><i class="far fa-edit"></i></button>
                                    <button class="btn btn-sm btn-outline-light" data-toggle="modal" data-target="#deleteModal"
                                            data-id="{{ a.id }}" data-alias="{{ a.alias }}"><i class="far fa-trash-alt"></i></button>
                                </td>
                            </tr>
                            {% endfor %}

                            </tbody>
                        </table>
                    </div>
                    <div class="tab-pane fade" id="others" role="tabpanel" aria-labelledby="others-tab">
                        <h3>Tab Content Heading</h3>
                        <p>Nullam et tellus ac ligula condimentum sodales. Aenean tincidunt viverra suscipit. Maecenas id molestie est, a commodo nisi. Quisque fringilla turpis nec elit eleifend vestibulum. Aliquam sed purus in odio ullamcorper congue consectetur in neque. Aenean sem ex, tempor et auctor sed, congue id neque. </p>
                    </div>
                </div>
            </div>
        </div>
        <!-- ============================================================== -->
        <!-- end - Application Tabs  -->
        <!-- ============================================================== -->

        <!-- ============================================================== -->
        <!-- Create new Applications  -->
        <!-- ============================================================== -->
        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12 mb-5">
            <div class="tab-regular">
                <div class="row">
                    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                        <div class="section-block" id="cards">
                            <h3 class="section-title">New Applications</h3>
                        </div>
                    </div>
                    {% for t in templates %}
                        {% if t.status == 'active' %}
                         <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12">
                            <div class="card">
                                <div class="card-body">
                                    <h4 class="card-title border-bottom pb-2">{{ t.title }}</h4>
                                    <p class="card-text"> {{ t.description }}</p>
                                    <a href="#" class="btn btn-primary"><i class="fas fa-plus-circle"></i> Create Application</a>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
        <!-- ============================================================== -->
        <!-- end - Create New Applications  -->
        <!-- ============================================================== -->
    </div>  <!-- row -->

    <div>
        <!-- ============================================================== -->
        <!-- Template Tabs  -->
        <!-- ============================================================== -->
        <div class="row">
            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3">
                <div class="section-block" id="templates">
                    <h3 class="section-title">Templates</h3>
                </div>
            </div>
            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3  text-sm-right">
                <a href="#" class="btn btn-primary"><i class="fas fa-plus-circle"></i>  Create Template</a>
            </div>
        </div>
        <div class="row">
            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12 mb-5">
                <div class="tab-vertical">
                    <ul class="nav nav-tabs " id="templateTabsNav" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link" id="preparation-t-tab" data-toggle="tab" href="#preparation-t" role="tab" aria-controls="preparation-t" aria-selected="false">Preparation</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" id="active-t-tab" data-toggle="tab" href="#active-t" role="tab" aria-controls="active-t" aria-selected="true">Active</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="closed-t-tab" data-toggle="tab" href="#closed-t" role="tab" aria-controls="closed-t" aria-selected="false">Closed</a>
                        </li>
                    </ul>
                    <div class="tab-content" id="templateTabsContent">
                        <div class="tab-pane fade" id="preparation-t" role="tabpanel" aria-labelledby="preparation-t-tab">
                            {% set status = "preparation" %}
                            {% include 'include_templates_table.html' %}
                        </div>
                        <div class="tab-pane fade show active" id="active-t" role="tabpanel" aria-labelledby="active-t-tab">
                            {% set status = "active" %}
                            {% include 'include_templates_table.html' %}
                        </div>
                        <div class="tab-pane fade" id="closed-t" role="tabpanel" aria-labelledby="closed-t-tab">
                            {% set status = "closed" %}
                            {% include 'include_templates_table.html' %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- ============================================================== -->
        <!-- end - Template Tabs  -->
        <!-- ============================================================== -->
    </div>



</div>

<!-- Modal -->
<div class="modal fade" id="template-modal" tabindex="-1" role="dialog" aria-labelledby="bookingModal" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="template-modal-title"> TITLE </h3>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
            <!-- ============================================================== -->
            <!-- Booking Form -->
            <!-- ============================================================== -->
            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                <form id="validationform" data-parsley-validate="" novalidate="">

                    <!-- Title Row -->
                    <div class="form-group row">
                        <label class="col-12 col-sm-3 col-form-label text-sm-right">Title</label>
                        <div class="col-12 col-sm-8 col-lg-6">
                            <input type="text" required="" placeholder="Type something" id="booking-title" class="form-control">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label class="col-12 col-sm-3 col-form-label text-sm-right">Description (Optional)</label>
                        <div class="col-12 col-sm-8 col-lg-6">
                            <textarea required="" class="form-control" id="booking-description"></textarea>
                        </div>
                    </div>

                    <!-- Booking type -->
                   <div class="form-group row">
                        <label class="col-sm-3 col-form-label text-sm-right">Booking Type</label>
                        <div class="col-sm-6">
                            <div class="custom-controls-stacked">
                                <label class="custom-control custom-radio custom-control-inline">
                                    <input type="radio" name="booking-type-radio" checked="" class="custom-control-input" value="booking"><span class="custom-control-label">Booking </span>
                                </label>
                                <label class="custom-control custom-radio custom-control-inline">
                                    <input type="radio" name="booking-type-radio" class="custom-control-input" value="slot"><span class="custom-control-label">Slot</span>
                                </label>
                                <label class="custom-control custom-radio custom-control-inline">
                                    <input type="radio" name="booking-type-radio" class="custom-control-input" value="downtime"><span class="custom-control-label">Downtime</span>
                                </label>
                            </div>
                        </div>
                    </div>

                </form>
            </div>
            <!-- ============================================================== -->
            <!-- end Booking Form -->
            <!-- ============================================================== -->
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" id="booking-btn-cancel"  class="btn btn-outline-secondary" data-dismiss="modal">Cancel</button>
        <button type="button" id="booking-btn-delete" class="btn btn-outline-danger" onclick="javascript: onDeleteButtonClick()">Delete</button>
        <button type="button" id="booking-btn-ok" class="btn btn-outline-dark" onclick="javascript: onOkButtonClick()">Update</button>
      </div>
    </div>
  </div>
</div>


<script>
  $('#deleteModal').on('show.bs.modal', function (event) {
      var button = $(event.relatedTarget); // Button that triggered the modal

      // Extract info from data-* attributes
      var id = button.data('id')
      var name = button.data('name')

      // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
      // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
      var modal = $(this)
      // modal.find('.modal-title').text('New message to ' + recipient)
      modal.find('.modal-body').html('<p> Do you want to DELETE user <b>' + name + '</b> (id = ' + id + ') ? </p>')
    })
</script>