{% set card_id = card_id or 'vol_card' %}

<div class="row">

    <!-- Slider Column -->
    <div class="col-2">
        <div class="card ml-3">
            <h4 class="card-header">Axis Slider</h4>
            <div class="card-body" id="{{ card_id }}_vol_slider">
            </div>
        </div>
    </div>

    <!-- Slices Gallery Column -->
    <div class="col-5">
       <div class="card ml-3">
            <h4 class="card-header">Slices Gallery</h4>
            <div class="card-body">
                <div class="row">
                <label class="mt-1 ml-4">Slice Axis: </label>
                <div class="switch-field ml-2 mr-2">

                     {% set radio_name = card_id + "_axis_switch" %}
                    <input type="radio" id="{{ radio_name }}-one" checked name="{{ radio_name }}" value="z"/>
                    <label for="{{ radio_name }}-one">Z</label>
                    <input type="radio" id="{{ radio_name }}-two" name="{{ radio_name }}" value="y" />
                    <label for="{{ radio_name }}-two">Y</label>
                     <input type="radio" id="{{ radio_name }}-three"  name="{{ radio_name }}" value="x" />
                    <label for="{{ radio_name }}-three">X</label>
                </div>
                </div>

                <!-- div used to draw the volume slices -->
                <div class="col" id="{{ card_id }}_volume-slices"></div>

            </div>
        </div>
    </div>

    <!-- 3D viewer column -->
    <div class="col-5">
        <div class="card ml-3">
            <h4 class="card-header">3D Viewer</h4>
            <div class="card-body" id="{{ card_id }}_vol_3d">

                <!-- div used to render 3d volume -->
                <div id="{{ card_id }}_vol_viewport" style="width:100%; height: 800px"></div>
                <div class="mt-2"><input id="{{ card_id }}_vol_viewport_slider" type="range" min="0" max="255", step="1"></div>
            </div>
        </div>
    </div>


</div>


<script>
    var file_path = {{ file_path|tojson }};
    var slices = {{ slices|tojson }};
    var isx, isy, isz = null;
    var dimensions = {{ dimensions|tojson }};
    var array = {{ array|tojson }};

    (function(window, document, $, undefined) {
    "use strict";
    $(function() {
        drawVolData("{{ card_id }}_volume-slices", slices.z);

        var vs = new VolumeSliderCard("{{ card_id }}_vol_slider", slices);

        $('input[name="{{ card_id }}_axis_switch"]').change(function () {
                drawVolData("{{ card_id }}_volume-slices", slices[$(this).val()]);
            })

        renderVolume3D("{{ card_id }}_vol_viewport", array, dimensions);

});
})(window, document, window.jQuery);
</script>